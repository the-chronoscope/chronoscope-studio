---
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const articles = await getCollection('articles');
  return articles.map(entry => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
const mode = (entry.data.mode || 'future').toLowerCase();
const image = entry.data.coverImage || entry.data.featuredImage;
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{entry.data.title}</title>
    <style>
        :root { --bg: #050505; --text: #e5e7eb; --accent: #22d3ee; }
        body { background: var(--bg); color: var(--text); font-family: sans-serif; margin: 0; padding: 2rem; }
        .past-mode { --accent: #f59e0b; }
        h1 { color: #fff; margin-top: 0; }
        a { color: var(--accent); }
        img { max-width: 100%; border-radius: 8px; margin: 2rem 0; border: 1px solid #333; }
        .content { max-width: 800px; margin: 0 auto; line-height: 1.8; }
    </style>
</head>
<body class={`${mode}-mode`}>
    <div class="content">
        <a href="/" style="text-decoration: none; font-size: 0.9rem;">‚Üê RETURN</a>
        <h1 style="margin-top: 1rem; font-size: 2.5rem;">{entry.data.title}</h1>
        {image && <img src={image} />}
        <Content />
    </div>
</body>
</html>
